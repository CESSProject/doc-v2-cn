随机选取轮值共识节点机制(R²S) 是 CESS 协议的重要组成部分。与波卡共识机制不同，随机选取轮值共识节点机制改变了验证节点选举的过程。整体流程如下：

1. 一个节点需要质押 100 万个代币来注册为共识节点。

2. 每个纪元验证节点都会轮换，轮换规则是信誉度评分。从所有共识节点中选出信誉最高的前 11 个节点（CESS 测试网中的 4 个节点）作为本纪元的验证节点。

3. 最终的积分由信誉积分和随机积分决定：

    {% hint style="success" %}
    **最终积分** = (信誉积分 * 80%) + (随机积分 * 20%).
    {% endhint %}

4. 区块生产者选择机制与 [BABE](https://wiki.polkadot.network/docs/learn-consensus#block-production-babe) 相同，通过 VRF 从 11 个验证节点中随机选择每个区块生产者。

5. 确认区块的方法与 [GRANDPA](https://wiki.polkadot.network/docs/learn-consensus#finality-gadget-grandpa) 相同.

6. 在每个 era 的第 5 个 epoch，将选择下一个 era 的验证节点。

# 信誉度评分模型

每个进入 CESS 网络的共识节点都需要维护网络状态，同时还承担数据存储和调度的任务。为了鼓励共识节点做更多的事情，我们设计了信誉模型。在我们的模型中，每个共识节点都有一个声誉值，该声誉值直接由调度器的工作负载决定。具体包括以下几项：

1. 处理服役文件的总字节数。

2. 文件验证随机挑战的超时惩罚次数。

信誉积分计算如下：

{% hint style="success" %}
**调度程序信誉值** = 1000 * 处理字节数比率 - (10 * 惩罚次数)
{% endhint %}
