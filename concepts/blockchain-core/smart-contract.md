CESS 区块链支持两类智能合约：

- WebAssembly 合约，例如 [ink!](https://use.ink/)
- EVM 兼容的合约，例如 [solidity](https://docs.soliditylang.org/en/develop/)

# 智能合约帐户

[智能合约模块](https://paritytech.github.io/substrate/master/pallet_contracts) 根据 `Currency` trait 扩展了帐户，以具有智能合约功能。 您可以使用这些智能合约帐户实例化智能合约并调用其他合约和非合约帐户。

智能合约代码存储在缓存中，可以使用其哈希检索。 此设计使得可以从同一哈希实例化多个智能合约，而无需每次复制代码。

当用户通过调用其功能之一与智能合约进行交互时，使用代码哈希检索关联的智能合约代码并执行该功能。 调用智能合约功能可能会导致：

- 更改此智能合约帐户关联的存储。
- 更改一个非合约帐户关联的存储。
- 实例化新的智能合约。
- 调用另一个智能合约。

如果智能合约帐户被清除，则其关联的代码和存储也将被删除。

# 合约执行与手续费

调用智能合约需要支付手续费，发送者必须为每次调用指定 gas 限制。 不管执行结果如何，未使用的 gas 将在调用后退还。

如果达到 gas 限制，则所有调用和状态更改（包括余额转移）仅在当前调用的合约级别恢复。 例如，如果合约 A 调用合约 B，合同 B 在执行中途耗尽 gas，则所有合约 B 的调用和状态更改都会回滚。 如果合约 A 做了正确的异常处理，则任何其他调用和状态更改都会持久化。
