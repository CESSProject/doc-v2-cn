# 整体架构

CESS 提供大规模的存储容量，支持管理数十亿个数据文件，可达到 PB 级别的空间，以满足企业级的大规模存储需求。同时，CESS 提供数据服务，包括数据确权和隐私保护。因此，我们的平台不仅为 dAPP（去中心化应用程序） 提供可扩展的数据存储，还提供了强大的数据所有权保护。

如下图所示，CESS 采用分层和松耦合的系统架构，从下而上，分別为**区块链服务层**、**分布式存储资源层**、**分布式内容分发层**、和**应用层**。

![CESS 分层系统架构](../assets/concepts/system-architecture/layered-system-architecture.png)

**区块链服务层**为整个 CESS 网络提供区块链服务，包括鼓励闲置的存储资源和计算资源加入 CESS 网络，为应用层提供数据存储、数据确权等服务。

**分布式存储层**采用虚拟化技术实现存储资源的集成和汇聚，其基础设施包括存储矿工和共识矿工。

**分布式内容分发层**使用内容缓存技术实现存储数据的快速传递，由检索和缓存矿工组成。

**应用层**则为开发者提供 API/SDK 工具，以访问底层数据存储服务、区块链服务、网络驱动服务等。

## 区块链服务层

区块链层及其代币机制鼓励未被使用的计算和存储资源加入 CESS 存储网络，提供高效的账本服务。CESS 提出了一种全新的随机选取轮值共识 (R²S)算法（一种异步拜占庭共识算法）、图灵完备的智能合约 runtime，以及跨链互操作能力。

区块链层会在 [区块链架构](blockchain-arch.md) 中作进一步的深入探讨。

## 分布式存储层

CESS 旨在构建一个基于区块链的分布式云存储系统。其重点是通过使用虚拟化技术有效管理分布式资源，为用户提供一致且高效的分布式存储服务。这一层由共识矿工和存储矿工组成。共识节点存储元数据并提供快速的数据索引，而存储节点提供数据存储空间。

为了满足不同的存储需求，我们设计并实现了一个多态数据存储访问接口，通过 API 为各种应用程序提供存储服务。多态数据访问服务以标准的 API 方式为上层应用提供对象存储、块存储和文件系统存储，为上层应用提供全面且友好的数据存储服务支持。对象存储模块自动完成将用户对象存储空间映射到较低层的统一分布式对象存储空间。用户数据以对象数据的形式存储。CESS 将提供块设备存储服务，支持快照、克隆等功能。

## 分布式内容分发层

为实现高效的文件访问，该系统有效地结合了 CDN 和 P2P 技术的优势。通过形成内容传送网络层，有效减少系统所需的代理服务器数量，增加系统的容量，降低总体成本，并利用 CDN 技术将媒体内容传输到客户的自治域。高性能缓存代理服务器的存在也避免了纯 P2P 网络中的“种子”问题。

同时在应用方面，应用中存储的内容将首先发布在发布源节点上，如果源节点未下线，则会持续提供下载服务。然而，随着用户从同一源节点下载的数量增加，该节点的带宽将耗尽，导致每个用户的下载速度降低。通过设计内容分发网络，网络中的大量租户节点开始保存并提供相同内容的下载。因此用户可以从多个节点下载内容，这大大提高了用户体验。

![分布式内容分发层](../assets/concepts/system-architecture/distributed-cdn.png)

CDN 层的整体设计与区块链技术完美结合。存储节点与每个地区的代理节点形成 CDN。代理节点与下面的存储节点形成相对独立的 P2P网络，没有公网 IP。节点贡献奖励通过智能合约发放，从而形成了一个自治的发展网络，如下图所示。

## 应用层

对于在 CESS 上开发的应用程序，请参考[生态角色：应用用户](../user)。

我们也欢迎其他团队将 CESS 集成到他们的产品当中，一起共建 CESS 的应用生态。

# 逻辑架构

另一方面，可以将 CESS 视为具有以下的逻辑结构。如下图所示，逻辑架构由两个主要部分组成：

- 一是 CESS 网络的核心功能系统，主要由共识节点和存储节点组成

- 另一个是在 CESS 生态系统中构建的应用程序，包括 CESS 区块链浏览器和去中心化对象存储服务，其中包括客户端、云服务、网关、Deshare 等应用。

![逻辑架构图](../assets/concepts/system-architecture/logical-structure.png)

- **存储节点**：主要负责提供空间、存储数据、和计算证明。

- **共识节点**：主要负责 CESS 网络的共识机制、交易执行、区块生成和验证。

- **TEE Worker**：主要负责数据标记，生成可验证且唯一的闲置数据用于空间验证。

- **SDK**：提供给开发者与 CESS 网络进行交互的开发工具。

- **区块链浏览器**：一个可视化界面，显示区块信息、交易详情、计算能力信息、账户信息等。

- **应用程序**：目前包括去中心化对象存储服务（DeOSS），提供在 CESS 网络上的对象存储服务。
